var datagridSortable;$(document).on("change","select[data-autosubmit]",function(){return $(this).closest("form").submit()}).on("change","input[data-autosubmit], textarea[data-autosubmit]",function(t){var e,a;return a=t.which||t.keyCode||0,13!==a&&(a>=9&&40>=a||a>=112&&123>=a)?void 0:(clearTimeout(window.datagrid_autosubmit_timer),e=$(this),window.datagrid_autosubmit_timer=setTimeout(function(t){return function(){return e.closest("form").submit()}}(this),200))}).on("keyup","input[data-autosubmit], textarea[data-autosubmit]",function(t){var e,a;return a=t.which||t.keyCode||0,13!==a&&(a>=9&&40>=a||a>=112&&123>=a)?void 0:(clearTimeout(window.datagrid_autosubmit_timer),e=$(this),window.datagrid_autosubmit_timer=setTimeout(function(t){return function(){return e.closest("form").submit()}}(this),200))}),document.addEventListener("change",function(t){var e,a,i,r,d,n,o,s,l;if(i=t.target.getAttribute("data-check"),i&&(e=document.querySelector(".datagrid-"+i+" input[data-check]:checked"),l=document.querySelector(".datagrid-"+i+' select[name="group_action[group_action]"]'),l&&(e?l.disabled=!1:(l.disabled=!0,l.value="")),a=new Event("change",{bubbles:!0}),l&&l.dispatchEvent(a)),i=t.target.getAttribute("data-check-all")){for(n=document.querySelectorAll("input[type=checkbox][data-check-all-"+i+"]"),s=[],r=0,o=n.length;o>r;r++)d=n[r],d.checked=t.target.checked,a=new Event("change",{bubbles:!0}),s.push(d.dispatchEvent(a));return s}}),window.datagridSerializeUrl=function(t,e){var a=[];for(var i in t)if(t.hasOwnProperty(i)){var r=e?e+"["+i+"]":i,d=t[i];d&&a.push("object"==typeof d?window.datagridSerializeUrl(d,r):encodeURIComponent(r)+"="+encodeURIComponent(d))}return a.join("&")},datagridSortable=function(){return $(".datagrid [data-sortable]").sortable({handle:".handle-sort",items:"tr",update:function(t,e){var a,i;return a=$(this).sortable("serialize",{key:"sort[]",attribute:"data-id",expression:/(.+)/}),i=$(this).data("sortable-url"),i=i.match(/\?/)?i+"&"+a:i+"?"+a,$.nette.ajax({type:"GET",url:i,error:function(t,e,a){return alert(t.statusText)}})}})},datagridSortable(),$.nette.ext("datagrid.happy",{success:function(){return window.happy.reset()}}),$.nette.ext("datagrid.sortable",{success:function(){return datagridSortable()}}),$.nette.ext("datagrid.forms",{success:function(){return $(".datagrid").find("form").each(function(){return window.Nette.initForm(this)})}}),$.nette.ext("datagrid.url",{success:function(t){var e,a,i,r;return t._datagrid_url&&window.history.pushState?(e=window.location.protocol+"//"+window.location.host,a=window.location.pathname,i=window.datagridSerializeUrl(t.state),r=i?e+a+"?"+i.replace(/\&$/,""):e+a,r+=window.location.hash,window.history.pushState({path:r},"",r)):void 0}}),$.nette.ext("datagrid.confirm",{before:function(t,e){var a;return e.nette&&(a=e.nette.el.data("confirm"))?confirm(a):void 0}}),$(document).on("click",".datagrid [data-toggle-detail]",function(){var t,e,a;return e=$(this).attr("data-toggle-detail"),t=$(this).attr("data-toggle-detail-grid"),a=$("."+t+" .item-detail-"+e)}),$.nette.ext("datargid.item_detail",{before:function(t,e){var a,i;return e.nette&&e.nette.el.attr("data-toggle-detail")?(a=e.nette.el.attr("data-toggle-detail"),i=$(".item-detail-"+a),i.hasClass("loaded")?i.find(".item-detail-content").size()?(i.hasClass("toggled")?i.find(".item-detail-content").slideToggle("fast",function(t){return function(){return i.toggleClass("toggled")}}(this)):(i.toggleClass("toggled"),i.find(".item-detail-content").slideToggle("fast")),!1):(i.removeClass("toggled"),!0):i.addClass("loaded")):void 0},success:function(t){var e,a;return t._datagrid_toggle_detail?(e=t._datagrid_toggle_detail,a=$(".item-detail-"+e),a.toggleClass("toggled"),a.find(".item-detail-content").slideToggle("fast")):void 0}}),$.nette.ext("datagrid.tree",{before:function(t,e){var a;return e.nette&&e.nette.el.attr("data-toggle-tree")&&(e.nette.el.toggleClass("toggle-rotate"),a=e.nette.el.closest(".datagrid-tree-item").find(".datagrid-tree-item-children").first(),a.hasClass("loaded"))?(a.slideToggle("fast"),!1):!0},success:function(t){var e,a,i,r,d,n,o;if(t._datagrid_tree){i=t._datagrid_tree,e=$(".datagrid-tree-item[data-id="+i+"]").find(".datagrid-tree-item-children").first(),e.addClass("loaded"),d=t.snippets;for(r in d)n=d[r],a=$(n),o=$('<div class="datagrid-tree-item" id="'+r+'">'),o.attr("data-id",a.attr("data-id")),o.append(a),e.append(o);return e.addClass("loaded"),e.slideToggle("fast"),$.nette.load()}}});