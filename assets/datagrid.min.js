var datagridSortable;$(document).on("change","select[data-autosubmit]",function(){return $(this).closest("form").submit()}).on("change","input[data-autosubmit], textarea[data-autosubmit]",function(t){var e,a;return a=t.which||t.keyCode||0,13!==a&&(a>=9&&40>=a||a>=112&&123>=a)?void 0:(clearTimeout(window.datagrid_autosubmit_timer),e=$(this),window.datagrid_autosubmit_timer=setTimeout(function(t){return function(){return e.closest("form").submit()}}(this),200))}).on("keyup","input[data-autosubmit], textarea[data-autosubmit]",function(t){var e,a;return a=t.which||t.keyCode||0,13!==a&&(a>=9&&40>=a||a>=112&&123>=a)?void 0:(clearTimeout(window.datagrid_autosubmit_timer),e=$(this),window.datagrid_autosubmit_timer=setTimeout(function(t){return function(){return e.closest("form").submit()}}(this),200))}),document.addEventListener("change",function(t){var e,a,r,i,n,d,o,u,s;if(r=t.target.getAttribute("data-check"),r&&(e=document.querySelector(".datagrid-"+r+" input[data-check]:checked"),s=document.querySelector(".datagrid-"+r+' select[name="group_action[group_action]"]'),s&&(e?s.disabled=!1:(s.disabled=!0,s.value="")),a=new Event("change",{bubbles:!0}),s&&s.dispatchEvent(a)),r=t.target.getAttribute("data-check-all")){for(d=document.querySelectorAll("input[type=checkbox][data-check-all-"+r+"]"),u=[],i=0,o=d.length;o>i;i++)n=d[i],n.checked=t.target.checked,a=new Event("change",{bubbles:!0}),u.push(n.dispatchEvent(a));return u}}),window.datagridSerializeUrl=function(t,e){var a=[];for(var r in t)if(t.hasOwnProperty(r)){var i=e?e+"["+r+"]":r,n=t[r];n&&a.push("object"==typeof n?window.datagridSerializeUrl(n,i):encodeURIComponent(i)+"="+encodeURIComponent(n))}return a.join("&")},datagridSortable=function(){return $(".datagrid [data-sortable]").sortable({handle:".handle-sort",items:"tr",update:function(t,e){var a,r;return a=$(this).sortable("serialize",{key:"sort[]",attribute:"data-id",expression:/(.+)/}),r=$(this).data("sortable-url"),r=r.match(/\?/)?r+"&"+a:r+"?"+a,$.nette.ajax({type:"GET",url:r,error:function(t,e,a){return console.log(t.statusText),alert(t.statusText)}})}})},datagridSortable(),$.nette.ext("datagrid.happy",{success:function(){return window.happy.reset()}}),$.nette.ext("datagrid.sortable",{success:function(){return datagridSortable()}}),$.nette.ext("datagrid.forms",{success:function(){return $(".datagrid").find("form").each(function(){return window.Nette.initForm(this)})}}),$.nette.ext("datagrid.url",{success:function(t){var e,a,r,i;return t._datagrid_url&&window.history.pushState?(e=window.location.protocol+"//"+window.location.host,a=window.location.pathname,r=window.datagridSerializeUrl(t.state),i=r?e+a+"?"+r.replace(/\&$/,""):e+a,i+=window.location.hash,window.history.pushState({path:i},"",i)):void 0}}),$.nette.ext("datagrid.confirm",{before:function(t,e){var a;return e.nette&&(a=e.nette.el.data("confirm"))?confirm(a):void 0}}),$.nette.ext("datagrid.tree",{before:function(t,e){var a;return e.nette&&e.nette.el.attr("data-toggle-tree")&&(e.nette.el.toggleClass("toggle-rotate"),a=e.nette.el.closest(".datagrid-tree-item").find(".datagrid-tree-item-children").first(),a.hasClass("loaded"))?(a.slideToggle("fast"),!1):!0},success:function(t){var e,a,r,i,n,d,o;if(t._datagrid_tree){r=t._datagrid_tree,e=$(".datagrid-tree-item[data-id="+r+"]").find(".datagrid-tree-item-children").first(),e.addClass("loaded"),n=t.snippets;for(i in n)d=n[i],a=$(d),o=$('<div class="datagrid-tree-item" id="'+i+'">'),o.attr("data-id",a.attr("data-id")),o.append(a),e.append(o);return e.addClass("loaded"),e.slideToggle("fast"),$.nette.load()}}});